# Project Rules
- Код: TypeScript strict, ESLint+Prettier; backend — форматтеры по умолчанию.
- Коммиты: Conventional Commits.
- Проверка: lint, typecheck, test, build — зелёные до merge.
- AI-итерации: каждый шаг → «покажи diff + локальную проверку».
- Коммуникация: объясняем простыми словами, без жаргона; даём короткие пошаговые инструкции и примеры. Если термин неизбежен — добавляем простое определение одной фразой.

## Правила архитектуры и этапов
- До деплоя: backend — Python FastAPI на 4000, хранение in-memory. После MVP — миграция в Firestore.
- Совместимость API: сохраняем те же маршруты `/api/v1/...` при изменении языка/стека.
- Лайки: один лайк на пользователя; повторный клик снимает. Требуется `X-User-Id` (uid Firebase).
- Комментарии: только для авторизованных; фронт прикладывает Bearer ID Token.
- Документация: после каждого крупного шага обновляем `docs/environments.md` и `docs/session-notes.md`.

## Дизайн: источник правды и принципы переноса
- Источник правды: Figma. Переносим 1:1 размеры, паддинги, gaps, радиусы, бордеры, цвета, тени, иконки, кегли/интерлиньяж.
- Приоритет: переиспользовать существующие токены. Нет токена — добавить: 
  - Цвета/темы — `apps/web/src/app/globals.css`
  - Типографика — `apps/web/src/app/tokens/typography.css`
  - Отступы — `apps/web/src/app/tokens/spacing.css`
  - Сетка — `puk-container`, `puk-grid`, 14 колонок (3/8/3)
- Временные стили, противоречащие макету, удаляются.
- Иконки — только SVG c точными размерами/цветами из Figma (эмодзи не использовать).
- Приёмка: пиксель‑перфект (допуск ≤ 1px), корректность в светлой/тёмной темах.
